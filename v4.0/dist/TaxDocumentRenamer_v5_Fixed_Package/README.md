# 税務書類リネームシステム v5.0 修正版

## バージョン情報
- バージョン: 5.0.1
- ビルド日時: 2025-08-28 13:10:42
- 対応システム: Windows 10/11

## 主な機能

### セットベース連番システム
- **セット1 (東京都)**: 1001, 1003, 1004 (市町村コードなし)
- **セット2 (愛知県蒲郡市)**: 1011, 1013, 1014 + 2001, 2003, 2004
- **セット3 (福岡県福岡市)**: 1021, 1023, 1024 + 2011, 2013, 2014

### 連番ルール統一
- **受信通知**: 必ず末尾03 (1003, 1013, 1023, 2003, 2013)
- **納付情報**: 必ず末尾04 (1004, 1014, 1024, 2004, 2014)  
- **申告書**: 必ず末尾01 (1001, 1011, 1021, 2001, 2011)

### OCR突合チェック機能
- セット判定後、OCRテキストとダブルチェック
- 矛盾検出時は自動アラート表示
- 信頼度スコア付きの詳細レポート

## 使用方法

1. **アプリケーション起動**
   - `TaxDocumentRenamer_v5_Fixed.exe` をダブルクリック

2. **ファイル追加**
   - PDFファイルをドラッグ&ドロップ
   - または「ファイル選択」「フォルダ選択」ボタンを使用

3. **設定確認**
   - 年月設定 (YYMM形式、例: 2508)
   - 「セットベース連番モード」をON（推奨）
   - 「OCR突合チェック・アラート機能」をON（推奨）

4. **リネーム実行**
   - 「リネーム実行 (修正版)」ボタンをクリック
   - 処理結果とアラートを確認

## 修正内容（v5.0対応）

### バグ修正
- 受信通知の番号付けエラー解決（1001→1003等）
- 納付情報の認識エラー解決（1001_受信通知→1004_納付情報等）
- 都道府県書類の番号統一（全て1011→適切な1001,1011,1021）
- 市町村書類の名称・番号修正

### 新機能
- セット基準の自動判定システム
- OCRテキストとの矛盾チェック
- 詳細なアラート・警告表示
- 信頼度スコア表示
- 処理結果の詳細レポート

## アラート種類

- **SUCCESS**: 正常処理完了
- **MISMATCH**: OCRテキストと判定結果の矛盾
- **AMBIGUOUS**: 複数セットが同スコアで曖昧
- **NOT_FOUND**: セット検出失敗

## トラブルシューティング

### 一般的な問題
- **セット検出失敗**: 手動でセット確認、キーワード不足の可能性
- **矛盾アラート**: OCRテキストを再確認、手動修正を検討
- **処理エラー**: ログタブでエラー詳細を確認

### サポート
問題が解決しない場合は、ログ情報と共にお問い合わせください。

## 動作環境
- Windows 10 以降
- メモリ: 4GB以上推奨
- ディスク容量: 100MB以上の空き容量

---
開発: 石井公認会計士・税理士事務所
Copyright (C) 2024
