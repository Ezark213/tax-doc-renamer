# サンプルPDFファイル

このディレクトリには、受け入れテスト用のサンプルPDFファイルを配置します。

## 必要なサンプルファイル

### 1. 複数ページPDF（分割テスト用）
**ファイル名**: `multi_page_sample.pdf`
**内容**: 
- 1ページ目: 法人税及び地方法人税申告書
- 2ページ目: 消費税及び地方消費税申告書
- 3ページ目: 受信通知（法人税関連）
- 4ページ目: 納付情報（消費税関連）

**期待される分割結果**:
- `0001_法人税及び地方法人税申告書_YYMM.pdf`
- `3001_消費税及び地方消費税申告書_YYMM.pdf`
- `0003_受信通知_YYMM.pdf`
- `3004_納付情報_YYMM.pdf`

### 2. 都道府県税申告書
**ファイル名**: `prefecture_tax_sample.pdf`
**内容**: 東京都法人都道府県民税・事業税・特別法人事業税申告書

**期待される結果**:
- `1001_東京都_法人都道府県民税・事業税・特別法人事業税_YYMM.pdf`（東京都がセット1の場合）

### 3. 市町村税申告書
**ファイル名**: `municipal_tax_sample.pdf`
**内容**: 愛知県蒲郡市法人市民税申告書

**期待される結果**:
- `2001_愛知県蒲郡市_法人市民税_YYMM.pdf`（蒲郡市がセット1の場合）
- `2011_愛知県蒲郡市_法人市民税_YYMM.pdf`（蒲郡市がセット2の場合）

### 4. 空白ページ混在PDF
**ファイル名**: `with_blank_pages_sample.pdf`
**内容**:
- 1ページ目: 法人税申告書
- 2ページ目: 空白ページ
- 3ページ目: 受信通知
- 4ページ目: 空白ページ

**期待される結果**:
- 空白ページは除外される
- 有効ページのみが分類・リネームされる

## サンプルファイル作成方法

### 実際のPDFを使用する場合
1. 税務申告書のサンプル（個人情報を除去済み）を用意
2. 必要に応じて複数書類を1つのPDFに結合
3. 上記ファイル名で保存

### テスト用ダミーPDFを作成する場合
```python
# サンプルPDF作成スクリプト（create_sample_pdfs.py）
from reportlab.pdfgen import canvas
from reportlab.lib.pagesizes import A4
import os

def create_test_pdf(filename, contents):
    c = canvas.Canvas(filename, pagesize=A4)
    for i, content in enumerate(contents):
        if content:  # 空白ページでない場合
            c.drawString(100, 750, f"ページ {i+1}")
            c.drawString(100, 700, content)
        c.showPage()
    c.save()

# 複数ページテストPDF作成
create_test_pdf("multi_page_sample.pdf", [
    "法人税及び地方法人税申告書\\n種目 法人税及び地方法人税申告書",
    "消費税及び地方消費税申告書\\n種目 消費税及び地方消費税申告書",
    "メール詳細\\n種目 法人税及び地方法人税申告書\\n受信通知",
    "納付情報\\n消費税 納付"
])
```

## テスト実行確認項目

### 分割機能
- [ ] 複数ページPDFが正しく分割される
- [ ] 空白ページが除外される
- [ ] ファイル名が期待される形式（XXXX_書類名_YYMM.pdf）

### 分類機能
- [ ] AND条件が正しく動作する（複数キーワード必須）
- [ ] 4桁番号が正しく付与される（0001, 1001, 2001, 3001等）
- [ ] 自治体連番が正しく適用される

### 命名機能  
- [ ] YYMMが正しく付与される
- [ ] 自治体名が正しく含まれる（都道府県税・市町村税）
- [ ] 受信通知・納付情報が正しく識別される

### エラーハンドリング
- [ ] 分類不能な書類は9999番で処理される
- [ ] エラーメッセージが分かりやすく表示される
- [ ] ログに処理過程が記録される