# 📋 変更履歴 (CHANGELOG)

## 税務書類リネームシステム - 全バージョン履歴

---

## [5.4.3] - 2025-09-11 🎯 Concise Naming Edition

### 🔧 変更内容
- **簡潔なリネーム名称への対応**
  - `0001_法人税及び地方法人税申告書` → `0001_法人税等申告書`
  - `3001_消費税及び地方消費税申告書` → `3001_消費税等申告書`
- **分類精度の完全維持** - OCR検出キーワードは変更なし
- **法改正対応力の強化** - 将来の法改正時の影響を最小化

### ✅ 品質保証
- Bundle分割・UI強制適用機能の正常動作確認
- 全30種類の書類分類精度に影響なし確認
- 実環境での動作テスト完了

### 📦 技術的改善
- ビルド設定のバージョン更新 (v5.4.1 → v5.4.3)
- セキュリティ対策の強化
- 隠れモジュールの追加

---

## [5.4.2] - 2025-09-XX 🔧 Bundle Split Enhancement

### 🔧 変更内容
- Bundle分割処理の最適化
- 税務書類リネーム規則の完全修正
- 処理ログシステムの改善

---

## [5.4.1] - 2025-09-08 🎯 Balance Trial Classification Fix

### 🚨 重要修正
- **残高試算表vs決算書分類問題の完全解決**
  - 優先度システム: 5004_残高試算表(140) > 5001_決算書(130)
  - 除外キーワード追加: 決算書から["残高試算表", "試算表", "残高試算"]を除外
- **Bundle分割時の受信通知連番処理強化**
- **OCRベースでの残高試算表キーワード強化**

### 🔍 技術的詳細
```python
"5004_残高試算表": {
    "priority": 140,  # 最高優先度
    "highest_priority_conditions": [
        AndCondition(["残高試算表"], "any"),
        AndCondition(["試算表"], "any")
    ],
    "exclude_keywords": []
}

"5001_決算書": {
    "priority": 130,  # 残高試算表より低い
    "exclude_keywords": ["残高試算表", "試算表", "残高試算"]
}
```

### ✅ 検証完了
- 実際の問題ファイル"残高試算表_貸借対照表_損益計算書"での動作確認
- 分類精度テストパス
- Bundle分割処理の正常動作確認

---

## [5.4.0] - 2025-08-XX 🚀 Receipt Numbering Edition

### 🆕 新機能
- **地方税受信通知連番システム**
  - 都道府県: 1003 → 1013 → 1023
  - 市町村: 2003 → 2013 → 2023
- **動的番号付与システム**
  - OCRベースでの受信通知自動検出
  - 連番管理システムの統合

### 🔧 改善
- 受信通知分類精度の向上
- UI強制適用システムの最適化
- エラーハンドリングの強化

---

## [5.3.5] - 2025-07-XX 🏢 UI-Robust Enterprise Edition

### 🎯 エンタープライズ機能
- **UI YYMM強制適用システム**
  - 固定資産書類（6001/6002/6003）の100%UI値使用保証
  - 納付税額一覧表（0000）のUI強制入力
- **Bundle分割経路RunConfig伝搬**
- **JobContext中央集権管理**

### 📊 性能改善
- 86%保守性向上
- 40%処理速度高速化
- エンタープライズレベル品質保証

### 🤖 開発ワークフロー
- AddFunc-BugFix Workflow MCP統合
- 6フェーズ体系的開発プロセス自動化

---

## [5.3.0] - 2025-06-XX 🔄 Advanced Classification

### 🆕 分類エンジン
- AI分類エンジンv5.0の導入
- AND条件による精密分類
- 優先度システムの実装

### 🔍 分類精度向上
- 30種類以上の税務書類対応
- OCR検出精度の向上
- 誤分類防止システム

---

## [5.2.0] - 2025-05-XX 📦 Bundle Auto-Split

### 🆕 Bundle PDF機能
- **Bundle PDF Auto-Split**
  - 束ねPDFの自動検出・分割
  - 2枚以上の対象書類を個別ファイル化
- **OCR内容ベース判定**
- **国税・地方税対応**

### 🔒 セキュリティ
- Windows Defender誤検知対策
- セキュアビルドシステム
- 実行ファイル保護機能

---

## [5.1.0] - 2025-04-XX 🎨 UI Enhancement

### 🎨 ユーザーインターフェース
- ドラッグ&ドロップUI改善
- バッチ処理機能
- 進捗表示システム

### 🔧 処理最適化
- PDF処理エンジンの改良
- OCRエンジンの最適化
- メモリ使用量の削減

---

## [5.0.0] - 2025-03-XX 🚀 Major Release

### 🆕 基本機能
- **税務書類自動分類システム**
- **OCR機能統合**
- **ファイル名自動生成**
- **YYMM期間管理**

### 📋 対応書類
- 国税申告書類（0000番台）
- 都道府県税関連（1000番台）
- 市町村税関連（2000番台）
- 消費税関連（3000番台）
- 会計書類（5000番台）
- 固定資産関連（6000番台）
- 税区分関連（7000番台）

### 🏗️ アーキテクチャ
- モジュール化設計
- 拡張可能なプラグインシステム
- エラーハンドリング機能

---

## 📊 統計情報

### バージョン別リリース数
- v5.4.x: 3リリース (機能改善・法改正対応)
- v5.3.x: 5リリース (エンタープライズ機能)
- v5.2.x: 2リリース (Bundle分割機能)
- v5.1.x: 4リリース (UI改善)
- v5.0.x: 1リリース (初期リリース)

### 累積改善項目
- 🔧 機能追加: 25項目
- 🐛 バグ修正: 18項目
- 📈 性能改善: 12項目
- 🔒 セキュリティ: 8項目
- 📚 ドキュメント: 15項目

---

## 🔮 今後の予定

### v5.5.0 (予定)
- OCRエンジンの精度向上
- 新しい税務書類形式への対応
- AI分類エンジンのさらなる最適化

### v6.0.0 (長期計画)
- クラウド連携機能
- 複数拠点対応
- リアルタイム同期機能

---

## 📋 サポート情報

### 各バージョンのサポート状況
- **v5.4.x**: ✅ 完全サポート (推奨)
- **v5.3.x**: ✅ 保守サポート
- **v5.2.x**: ⚠️ 限定サポート
- **v5.1.x**: ❌ サポート終了
- **v5.0.x**: ❌ サポート終了

### アップグレード推奨
- v5.2.x以前のユーザー: v5.4.3への即時アップグレード推奨
- v5.3.x以降のユーザー: v5.4.3への移行を検討

---

**📋 Tax Document Renamer System - Complete Changelog**  
**継続的改善による確実な税務書類管理システム**

🤖 Generated with [Claude Code](https://claude.ai/code)  
Co-Authored-By: Claude <noreply@anthropic.com>